请帮我优化以下代码:

battlesystem.cpp/h
提高性能
增强可读性
改进代码结构
遵循[语言]的最佳实践